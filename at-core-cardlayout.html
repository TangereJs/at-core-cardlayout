<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="at-core-cardlayout-desktop.html">
<link rel="import" href="at-core-cardlayout-mobile.html">

<dom-module id="at-core-cardlayout">

  <template>
    <style>
      :host {
        width: 100%;
        display: block;
      }
    </style>
    <content></content>
    <slot></slot>
  </template>


  <script>
    Polymer({
      is: "at-core-cardlayout",
      properties: {
        cardLayoutData: {
          type: String,
          value: ""
        },
        // sizing Container
        sizingContainer: {
          type: Object
        },
        masonry: {
          type: Boolean,
          value: false
        },
        autoSort: {
          type: Boolean,
          value: false
        },
        sortable: {
          type: Boolean,
          value: false
        }
      },

      clear: function () {
        return this._cards.clear();
      },

      get cardsContainer() {       
        return this._cards.$.cards;
      },

      getById: function (id) {      
        if (!this._cards.getById) throw "not implemented";
        return this._cards.getById(id);
      },

      remove: function (id) {
        if (!this._cards.remove) throw "not implemented";
        return this._cards.remove(id);
      },

      append: function (Elements) {
        if (!this._cards.sizingContainer) this._cards.sizingContainer = this.sizingContainer;
        return this._cards.append(Elements);
      },

      appendContainer: function (options) {
        debugger;
        if (!this._cards.sizingContainer) this._cards.sizingContainer = this.sizingContainer;
        return container;
      },

      updateLayout: function (options) {
        if (!this._cards.sizingContainer) this._cards.sizingContainer = this.sizingContainer;
        return this._cards.updateLayout(options);
      },

      detached: function () {
        
      },


      reset: function () {
        debugger;
      },

      attached: function () {
        
      },

      ready: function (options) {

        var container = "at-core-cardlayout-desktop";
  
        if (Tangere.session.browser.ios || Tangere.session.browser.android || Tangere.session.browser.extension) container = "at-core-cardlayout-mobile";

        var cards = document.createElement(container);
        cards.id = this.id + "-layout";
        cards.autoSort = this.autoSort;
        cards.masonry = this.masonry;
        cards.sortable = this.sortable;
        Polymer.dom(this).appendChild(cards);
        Polymer.dom.flush();
        this._cards = cards;


      }
    });
  </script>
</dom-module>

